
/* Smart HTML Elements v7.3.0 (2020-Apr) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=89)}({89:function(e,t){Smart("smart-table",class extends Smart.ContentElement{static get properties(){return{columns:{value:null,type:"any?",reflectToAttribute:!1},dataSource:{value:null,type:"any?",reflectToAttribute:!1},filtering:{value:!1,type:"boolean"},filterTemplate:{value:null,type:"string?"},messages:{value:{en:{filterPlaceholder:"Filter"}},type:"object",extend:!0},pageSize:{value:10,allowedValues:[10,25,50],type:"int"},pageIndex:{value:0,type:"int"},paging:{value:!1,type:"boolean"},sortMode:{value:"none",type:"string",allowedValues:["none","one","many"]}}}static get listeners(){return{"tableContainer.down":"downHandler","filterInput.keyup":"_filterInputKeyupHandler","pager.change":"_pagerChangeHandler","pager.pageSizeChanged":"_pagerPageSizeChanged"}}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="header" class="smart-table-header">\n                        <smart-input id="filterInput" class="underlined"></smart-input>\n                    </div>\n                    <table id="tableContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-table-container">\n                        <content></content>\n                    </table>\n                    <smart-pager id="pager" page-index="[[pageIndex]]" page-size="[[pageSize]]" show-first-last-navigation-buttons show-page-index-selectors show-page-size-selector show-prev-next-navigation-buttons show-summary page-index-selectors="5"></smart-pager>\n                </div>'}render(){this._filterInfo={query:""},this.setAttribute("role","presentation"),this.$.filterInput.placeholder=this.localize("filterPlaceholder"),this.dataBind(),super.render()}clearFilters(){this._filterInfo.query="",this.$.filterInput.value="",this.dataSource.clearFilter(),this._fullRefresh()}navigateTo(e){const t=this;if(isNaN(e)||null===e)return;const n=t.pageIndex;t.pageIndex=Math.max(Math.min(Math.round(e),t.$.pager.pagesCount-1),0),t.paging&&t.pageIndex!==n&&t._fullRefresh()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const r=this;switch(e){case"filtering":!1===n&&(r._filterInfo.query||r._filterInfo.appliedFilters)&&r.clearFilters();break;case"pageIndex":r.pageIndex=Math.max(Math.min(Math.round(n),r.$.pager.pagesCount-1),0),r.paging&&r.pageIndex!==t&&r._fullRefresh();break;case"pageSize":r.paging&&r._fullRefresh();break;case"paging":if(!1===n&&1===r.$.pager.pagesCount)return;r._fullRefresh()}}_initColumns(){const e=this;e._filterInfo.stringDataFields=[],e._columns=[],e.columnByDataField=[];for(let t=0;t<e.columns.length;t++){let n=e.columns[t];if("string"==typeof n&&e.dataSource.dataFields){const t=e.dataSource.dataFields.find(e=>{if(e.name===n)return e});n={label:n,dataField:n,dataType:t&&t.dataType||"string"}}"string"!==n.dataType&&"number"!==n.dataType||e._filterInfo.stringDataFields.push(n.dataField),e._columns.push(n),e.columnByDataField[n.dataField]=n}}_initRows(){const e=this;e.rows=[],e.rowById=[];const t=function(t,n){const r={data:t,boundIndex:n};e.rowById[r.uid]=r,e.rows.push(r)};let n=0,r=e.dataSource.length;if(e.paging){const t=Math.ceil(r/e.pageSize);e.$.pager.pagesCount=t,e.$.pager.totalRecords=r,e.pageIndex=Math.min(e.pageIndex,t-1),n=e.pageIndex*e.pageSize,r=n+e.pageSize}for(let a=n;a<r;a++){const n=e.dataSource[a];n&&!1!==n.$.filtered&&t(n,a)}e.rows=new Smart.ObservableArray(e.rows);for(let t=0;t<e.rows.length;t++){e.rows[t].propertyChanged=function(e,t,n){}}e.rows.notify((function(t){if(!e.rows.canNotify)return;if(t.path)return;e.rows.canNotify=!1;const n=t.action;if(e.dataSource){switch(e.dataSource.canNotify=!1,n){case"add":e.dataSource.add(e.rows[t.index]);break;case"update":e.dataSource.update(t.index,e.rows[t.index]);break;case"remove":e.dataSource.removeAt(t.index)}e.dataSource.canNotify=!0,e.rows.canNotify=!0,e.refresh()}}))}downHandler(e){}refresh(){const e=this;let t="<thead><tr>",n="<tbody>";for(let n=0;n<e._columns.length;n++){t+='<th scope="col">'+e._columns[n].label+"</th>"}t+="</tr></thead>";for(let t=0;t<e.rows.length;t++){const r=e.rows[t];n+="<tr>";for(let t=0;t<e._columns.length;t++){const a=e._columns[t];n+="<td>"+r.data[a.dataField]+"</td>"}n+="</tr>"}n+="</tbody>",e.innerHTML=t+n;const r=e.querySelectorAll("th");for(let t=0;t<e._columns.length;t++){const n=e._columns[t];n.headerCellElement=r[t],n.headerCellElement.onclick=function(){"none"!==e.sortMode&&(this.headerCellElement.sortIconContainerElement||(this.headerCellElement.innerHTML+='<span class="sort-by"></span>',this.headerCellElement.sortIconContainerElement=this.headerCellElement.lastChild),this.headerCellElement.sortIconContainerElement.classList.contains("asc")?e.sortBy(this.dataField,"desc"):this.headerCellElement.sortIconContainerElement.classList.contains("desc")?e.sortBy(this.dataField,null):e.sortBy(this.dataField,"asc"))}.bind(n)}if(e._sortColumns&&e._sortColumns.length>0)for(let t=0;t<e._sortColumns.length;t++){const n=e._sortColumns[t],r=e.columnByDataField[n.dataField];r.headerCellElement.sortIconContainerElement||(r.headerCellElement.innerHTML+='<span class="sort-by '+n.direction+'"></span>',r.headerCellElement.sortIconContainerElement=r.headerCellElement.lastChild)}}dataBind(){const e=this;if(!e.dataSource){if(!e.columns){e.columns=[],e.dataFields=[];const t=document.querySelectorAll("th");for(let n=0;n<t.length;n++){const r=t[n].innerHTML.trim();let a={label:r,dataField:r,dataType:"string"};e.columns.push(a),e.dataFields.push(r)}}let t=[];if(!e.rows){const n=document.querySelectorAll("tr");for(let r=0;r<n.length;r++){const a={},l=n[r].querySelectorAll("td");if(l.length>0){for(let t=0;t<e.columns.length;t++){a[e.columns[t].dataField]=l[t].innerHTML.trim()}t.push(a)}}e.dataSource=new Smart.DataAdapter({dataSource:t,dataFields:e.dataFields})}const n=e.querySelectorAll("table");n.length>1&&n[n.length-1].parentNode.removeChild(n[n.length-1])}e._initColumns(),e._initRows(),e.dataSource.notify((function(t){if(e.dataSource._updating)return;const n=t.data;switch(e.rows.canNotify=!1,t.action){case"add":if(n.length)for(let t=0;t<n.length;t++)addNewRow(n[t],e.dataSource.length-n.length+t);else addNewRow(n,e.dataSource.length-1);break;case"update":if(n.length)for(let r=0;r<n.length;r++){const a=t.index[r];e.rows[a].data=n[r]}else{const r=t.index;e.rows[r].data=n}break;case"insert":addNewRow(n,t.index);for(let t=0;t<e.rows.length;t++){e.rows[t].dataIndex=t}break;case"remove":removeAt(t.index);break;case"removeLast":removeLastRow()}e.rows.canNotify=!0,e.refresh()})),e.refresh()}sortBy(e,t){const n=this,r=n.columnByDataField[e],a=[],l=[],o=[],s=function(e){e.headerCellElement.sortIconContainerElement||(e.headerCellElement.innerHTML+='<span class="sort-by"></span>',e.headerCellElement.sortIconContainerElement=e.headerCellElement.lastChild)},i=function(e){s(e),e.headerCellElement.sortIconContainerElement.classList.remove("desc"),e.headerCellElement.sortIconContainerElement.classList.remove("asc"),e.sortOrder=null},d=function(){if(n._sortColumns&&n._sortColumns.length>0)for(let e=0;e<n._sortColumns.length;e++){const t=n._sortColumns[e],r=n.columnByDataField[t.dataField];i(r)}n._sortColumns=[]},c=function(){n.dataSource._sort(n.dataSource.boundSource,a,l,o);for(let e=0;e<n.dataSource.length;e++){const t=n.rows[e],r=n.dataSource[e];t.data=r,t.boundIndex=r.boundIndex}n.refresh()};if(null==r)return void(n._sortColumns&&n._sortColumns.length>0&&(d(),c()));if("none"===n.sortMode||!n.dataSource)return;if(t&&r.sortOrder===t)return;let u=t||"asc";i(r),n._sortColumns||(n._sortColumns=[]);let h="string";for(let t=0;t<n.dataSource.dataFields.length;t++){const r=n.dataSource.dataFields[t];if(r.name===e){h=r.dataType;break}}let f=!0;for(let t=0;t<n._sortColumns.length;t++){const a=n._sortColumns[t];if(a.dataField===e)if(f=!1,"asc"===a.direction)a.direction="desc",u="desc";else if("desc"===a.direction){n._sortColumns.splice(t,1),i(r),u=null;break}}f&&("one"===n.sortMode&&d(),n._sortColumns.push({dataField:e,direction:u,dataType:h})),s(r),null!==u?(r.headerCellElement.sortIconContainerElement.classList.remove("asc"),r.headerCellElement.sortIconContainerElement.classList.remove("desc"),r.sortOrder=u,"desc"===u?r.headerCellElement.sortIconContainerElement.classList.add("desc"):r.headerCellElement.sortIconContainerElement.classList.add("asc")):(r.headerCellElement.sortIconContainerElement.classList.remove("asc"),r.headerCellElement.sortIconContainerElement.classList.remove("desc"));for(let e=0;e<n._sortColumns.length;e++){const t=n._sortColumns[e];a.push(t.dataField),l.push(t.direction),o.push(t.dataType)}c()}clearSort(){this.sortBy(null)}_fullRefresh(){this._initRows(),this.refresh()}_pagerChangeHandler(e){e.target===this.$.pager&&(this.pageIndex=e.detail.index,this._fullRefresh())}_pagerPageSizeChanged(e){this.pageSize=e.detail.value,this._fullRefresh()}_filterInputKeyupHandler(){const e=this;clearTimeout(e._filterInputTimeout),e._filterInputTimeout=setTimeout((function(){e._filterInfo&&e.$.filterInput.value!==e._filterInfo.query&&e._filterByAll(e.$.filterInput.value)}),500)}_filterByAll(e){const t=this;if(t._filterInfo.query=e,""===e)return void t.clearFilters();const n=[];t._filterInfo.stringDataFields.forEach(t=>{const r=new Smart.Utilities.FilterGroup,a=r.createFilter("string",e,"CONTAINS");r.addFilter("or",a),n.push([t,r])}),t.dataSource._filter(n,"or"),t._fullRefresh()}})}});